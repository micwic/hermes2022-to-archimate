---
description: Sp√©cification g√©n√©rale du module hermes2022-concepts-site-extraction
alwaysApply: true
---

# specification-hermes2022-concepts-site-extraction.mdc: Sp√©cification g√©n√©rale du module hermes2022-concepts-site-extraction

Chemin : hermes2022-to-archimate/hermes2022-concepts-site-extraction/.cursor/rules/

> Cr√©√© le : 2025-08-16  
> Derni√®re mise √† jour : 2025-08-19

## Description g√©n√©rale

- La m√©thode HERMES des gestion de projet et de programme de la Conf√©d√©ration Helv√©tique est d√©crite en anglais sur le site <https://www.hermes.admin.ch/en/>
- **Finalit√© du module** : Extraire automatiquement les concepts HERMES2022 depuis les pages officielles sp√©cifiques et les transformer en fichiers interm√©diaires structur√©s JSON valid√©s
- **Port√©e du module** : Extraction cibl√©e des phases HERMES2022 avec leur contexte et articulation g√©n√©rale, selon la hi√©rarchie officielle (1=Initiation, 2=Execution avec 2.1=Concept, 2.2=Implementation, 2.3=Deployment, 3=Closure)
- **Interface de sortie** : Fichiers JSON conformes aux sch√©mas d√©finis dans le module hermes2022-extraction-files

## Contexte

- Sp√©cification amont @.cursor/rules/specification-hermes2022-to-archimate.mdc
- La m√©thode HERMES de gestion de portefeuille et de gestion des applications sont hors contexte, elles sont ignor√©es
- La m√©thode HERMES de gestion de projet et de programme de la Conf√©d√©ration Helv√©tique est d√©crite en plusieurs langues : allemand, fran√ßais, italien et anglais
- La racine du site <https://www.hermes.admin.ch> est modifi√©e automatiquement √† la langue par d√©faut ou est celle d√©finie dans l'url lors de la requ√™te
- L'url du site en allemand est <https://www.hermes.admin.ch/de/>
- L'url du site en fran√ßais est <https://www.hermes.admin.ch/fr/>
- L'url du site en italien est <https://www.hermes.admin.ch/it/>
- L'url du site en anglais est <https://www.hermes.admin.ch/en/>

## Objectifs

- Faire extraire par l'IA, des pages identifi√©es comme pertinentes du site internet de r√©f√©rence, les concepts HERMES2022 jug√©s pertinents pour le projet
- Faire transformer par l'IA les donn√©es jug√©es pertinentes pour les enregistrer dans des fichiers interm√©diaires structur√©s, lisibles et v√©rifiables

## Conception g√©n√©rale

- Un fichier de configuration de l'extraction contient les propri√©t√©s utiles √† celle-ci
- Le processus d'extraction est g√©n√©rique et configurable, son ex√©cution conforme est bas√©e sur le contenu du fichier de configuration
- Les concept HERMES2022 jug√©s pertinents pour le projet sont : 1) Les phases, 2) Les sc√©narios, 3) Les modules, 4) Les t√¢ches, 5) Les r√©sultats, 6) Les r√¥les
- les structures cibles de la transformation sont les structures et types d√©finis pour les fichiers interm√©diaires

## Structure de r√©pertoire

| √âl√©ment | Type | Description |
|:--------|:-----|:------------|
| `/config/` | R√©pertoire | Configuration de l'extraction et instructions IA |
| `/config/extraction-phases-*.md` | Fichiers | Instructions d'extraction IA sp√©cifiques par phase HERMES2022 |
| `/config/extraction-config.json` | Configuration | Param√®tres de configuration pour l'extraction automatis√©e |
| `/output/` | R√©pertoire | Fichiers JSON de sortie produits par l'extraction |
| `/logs/` | R√©pertoire | Journaux d'ex√©cution et de validation |

## D√©cisions architecturales et techniques

### Site internet de r√©f√©rence HERMES2022

#### Description d√©taill√©e pour le site internet de r√©f√©rence HERMES2022

- [2025-08-16] Le site internet de r√©f√©rence pour l'extraction des concepts HERMES2022 est <https://www.hermes.admin.ch/en/>
- [2025-08-16] L'URL relative pour les phases est <https://www.hermes.admin.ch/en/>

#### Justification pour le site internet de r√©f√©rence HERMES2022

- La documentation de r√©f√©rence du projet est en anglais, les mod√®les Archimate sont donc en anglais

#### Patterns valid√©s √† suivre suite √† la d√©cision

- **URL RACINE** √† utiliser pour les requ√™tes internet par l'IA est <https://www.hermes.admin.ch/en/>

#### Anti-Patterns en raison d'erreurs identifi√©es, √† ne pas reproduire

- **Extraction g√©n√©rique uniquement** : √âviter d'extraire depuis la page g√©n√©rale seule ‚Üí **Solution** : Pages sp√©cifiques par phase ‚Üí **R√®gle √† adopter** : Une URL par phase pour contexte d√©taill√©
- **Ignorance contexte articulation** : √âviter d'ignorer la page g√©n√©rale ‚Üí **Solution** : Extraction contexte g√©n√©ral ‚Üí **R√®gle √† adopter** : Utiliser pages.html pour articulation d'ensemble
- **Structure hi√©rarchique incorrecte** : √âviter order s√©quentiel simple ‚Üí **Solution** : Hi√©rarchie √† deux niveaux ‚Üí **R√®gle √† adopter** : Respecter structure officielle Execution composite

#### √âtat d'impl√©mentation de la d√©cision

üöß [En cours de sp√©cification et r√©alisation]

### Approche hybride IA : Cursor + API externe √©volutive

#### Description d√©taill√©e pour l'approche hybride IA

- [2025-08-16] L'extraction des concepts HERMES2022 utilise une approche hybride en deux phases : Phase 1 avec l'IA int√©gr√©e de Cursor pour le d√©veloppement initial, Phase 2 avec des API externes (Claude, GPT-4) pour la production et l'optimisation
- [2025-08-16] L'architecture initiale doit √™tre con√ßue pour faciliter la transition vers les API externes sans refactoring majeur
- [2025-08-16] L'approche doit permettre la r√©utilisation dans d'autres contextes que le projet actuel

#### Justification pour l'approche hybride IA

- **Phase 1 - Cursor** : Validation du concept, d√©veloppement rapide, pas de co√ªt initial
- **Phase 2 - API externe** : Contr√¥le fin des param√®tres, mod√®les sp√©cialis√©s, tra√ßabilit√© compl√®te
- **R√©utilisabilit√©** : Architecture modulaire permettant l'adaptation √† d'autres m√©thodologies et contextes
- **√âvolutivit√©** : Possibilit√© de basculer selon les besoins et contraintes

#### Patterns valid√©s pour l'approche hybride IA

- **Interface abstraite** : D√©finir une interface commune entre Cursor et API externe
- **Configuration √©volutive** : Structure de configuration supportant les deux approches
- **Modularit√©** : S√©paration claire entre logique d'extraction et interface IA
- **Plugins** : Architecture permettant l'ajout facile de nouveaux fournisseurs IA

#### Anti-Patterns pour l'approche hybride IA √† √©viter

- **Couplage fort** : √âviter de coder directement pour Cursor ‚Üí **Solution** : Interface abstraite ‚Üí **R√®gle √† adopter** : Architecture en couches avec abstraction de l'IA
- **Configuration rigide** : √âviter une configuration sp√©cifique √† Cursor ‚Üí **Solution** : Configuration g√©n√©rique extensible ‚Üí **R√®gle √† adopter** : Structure de configuration √©volutive

#### √âtat d'impl√©mentation pour l'approche hybride IA

üöß [En cours de conception et r√©alisation]

### Structure et format du fichier de configuration

#### Description d√©taill√©e pour la structure et format du fichier de configuration

- [2025-08-16] Le fichier de configuration utilise un format JSON avec validation JSON Schema
- [2025-08-16] La configuration supporte deux modes d'IA : mode Cursor (int√©gr√©) et mode API externe (Claude, GPT-4)
- [2025-08-16] La structure est con√ßue pour √™tre extensible et r√©utilisable dans d'autres contextes

#### Justification pour la structure et format du fichier de configuration

- **Format JSON** : Lisibilit√© humaine et machine, validation automatique
- **JSON Schema** : Validation structurelle, documentation int√©gr√©e
- **Configuration √©volutive** : Support des deux approches IA sans modification majeure
- **R√©utilisabilit√©** : Structure g√©n√©rique applicable √† d'autres m√©thodologies

#### Patterns valid√©s pour la structure et format du fichier de configuration

- **Configuration hybride** : Support simultan√© Cursor + API externe
- **Prompts configurables** : Instructions IA param√©trables selon le contexte
- **Validation automatique** : Contr√¥les de coh√©rence avant ex√©cution
- **Extensibilit√©** : Ajout facile de nouveaux concepts et param√®tres

#### Anti-Patterns pour la structure et format du fichier de configuration √† √©viter

- **Configuration monolithique** : √âviter un fichier unique complexe ‚Üí **Solution** : Modularit√© par domaines ‚Üí **R√®gle √† adopter** : Un sch√©ma par concept pour faciliter la maintenance
- **Couplage IA** : √âviter de lier la configuration √† un fournisseur IA sp√©cifique ‚Üí **Solution** : Interface abstraite ‚Üí **R√®gle √† adopter** : Configuration g√©n√©rique avec plugins IA

#### √âtat d'impl√©mentation pour la structure et format du fichier de configuration

üöß [En cours de conception et r√©alisation]

### Structure et format des instructions d'extraction

#### Description d√©taill√©e pour la structure et format des instructions d'extraction

- [2025-08-16] Les instructions d'extraction utilisent le format Markdown pour optimiser l'utilisation par l'IA int√©gr√©e de Cursor
- [2025-08-16] Un fichier d'instructions s√©par√© est cr√©√© pour chaque concept HERMES2022 √† extraire (phases, sc√©narios, modules, t√¢ches, r√©sultats, r√¥les)
- [2025-08-16] Les instructions se concentrent uniquement sur l'extraction et la transformation, pas sur la d√©finition de la structure cible
- [2025-08-16] La structure cible est d√©finie par les sch√©mas JSON des fichiers interm√©diaires, cr√©ant un contrat d'interface entre extraction et consommation

#### Justification pour la structure et format des instructions d'extraction

- **Format Markdown** : Naturel pour l'IA int√©gr√©e de Cursor, instructions conversationnelles claires
- **Fichiers s√©par√©s** : Maintenance facilit√©e, lisibilit√© optimale, √©volution ind√©pendante par concept
- **S√©paration des responsabilit√©s** : Instructions d'extraction ‚â† d√©finition structure cible
- **Contrat d'interface** : Synchronisation progressive entre instructions et sch√©mas cibles

#### Patterns valid√©s pour la structure et format des instructions d'extraction

- **Un fichier par concept** : `/config/extraction-{concept}.md` pour chaque concept HERMES2022
- **Instructions conversationnelles** : Prompts naturels adapt√©s √† l'IA de Cursor
- **Synchronisation progressive** : √âvolution conjointe des instructions et des sch√©mas cibles
- **Validation par sch√©ma** : Contr√¥le de conformit√© via JSON Schema des fichiers interm√©diaires

#### Anti-Patterns pour la structure et format des instructions d'extraction √† √©viter

- **Fichier monolithique** : √âviter un seul fichier pour tous les concepts ‚Üí **Solution** : Fichiers s√©par√©s par concept ‚Üí **R√®gle √† adopter** : Modularit√© conceptuelle
- **M√©lange des responsabilit√©s** : √âviter de d√©finir la structure cible dans les instructions ‚Üí **Solution** : S√©paration claire extraction/structure ‚Üí **R√®gle √† adopter** : Contrat d'interface via sch√©mas
- **Format technique** : √âviter JSON/YAML pour les instructions ‚Üí **Solution** : Markdown conversationnel ‚Üí **R√®gle √† adopter** : Instructions naturelles pour l'IA

#### √âtat d'impl√©mentation pour la structure et format des instructions d'extraction

üöß [En cours de conception et r√©alisation]

### Contrat d'interface extraction-fichiers interm√©diaires

#### Description d√©taill√©e pour le contrat d'interface

- [2025-08-16] Un contrat d'interface est √©tabli entre les instructions d'extraction et les sch√©mas des fichiers interm√©diaires, il consiste surtout √† v√©rifier et faire se synchroniser les d√©finitions dans les sp√©cifications respectives par l'IA
- [2025-08-16] La synchronisation se fait progressivement au fur et √† mesure de l'√©volution des besoins
- [2025-08-16] Les sch√©mas JSON des fichiers interm√©diaires d√©finissent la structure cible de la transformation

#### Justification pour le contrat d'interface

- **Coh√©rence** : Garantit l'alignement entre extraction et consommation
- **√âvolutivit√©** : Permet l'adaptation progressive des deux c√¥t√©s
- **Validation** : Assure la conformit√© des donn√©es extraites
- **Maintenance** : Facilite la gestion des changements

#### Patterns valid√©s pour le contrat d'interface

- **Synchronisation progressive** : √âvolution conjointe des instructions et sch√©mas
- **Validation automatique** : Contr√¥le de conformit√© via JSON Schema
- **Documentation partag√©e** : R√©f√©rence commune pour l'√©quipe

#### √âtat d'impl√©mentation pour le contrat d'interface

üöß [En cours de sp√©cification et r√©alisation]

### Visa humain d'overview pour hermes2022-concepts

#### Description d√©taill√©e pour le visa humain d'overview

- [2025-08-19] La qualit√© du champ `overview` des concepts HERMES2022 est valid√©e manuellement via un fichier d'approbation (sidecar) adjacent √† l'artefact JSON produit.
- [2025-08-19] Le visa est consign√© par √©l√©ments/r√®gles √† contr√¥ler (statuts par item) avec des m√©tadonn√©es globales uniques (reviewer, date, notes).

#### Justification pour le visa humain d'overview

- La conformit√© structurelle est assur√©e par JSON Schema; la qualit√© s√©mantique de `overview` requiert un jugement humain.
- La mat√©rialisation explicite du visa am√©liore la tra√ßabilit√© et l'auditabilit√© sans sur‚Äëing√©nierie.

#### Patterns valid√©s pour le visa humain d'overview

- **Sidecar d'approbation**: Fichier sidecar adjacent nomm√© comme l'artefact avec suffixe `.approval.json` g√©n√©r√© par l'IA en post extraction
- **Sch√©ma d'approbation**: `shared/hermes2022-extraction-files/config/json-schemas/hermes2022-concepts-approval.json`.
- **Structure du visa**:
  - M√©tadonn√©es globales: `artifact`, `reviewer`, `date`, `notes?`.
  - D√©tails par item: `target`, `rule`, `status` (`approved|rejected|pending`), `lastChecked`, `comment?`, `evidence?`.
- **Initialisation status approbation** : Cible √† valider g√©n√©r√©es selon liste ci-dessous avec status "pending" pour les cibles √† valider en post extraction

**Cibles √† valider par revue humaine (format JSON Pointer)** :

- `/concepts/overview`

#### Anti-Patterns pour le visa humain d'overview √† √©viter

- **Visa global unique**: √©viter un statut global sans granularit√© par r√®gle/cible.
- **Absence de sch√©ma**: √©viter des fichiers d'approbation non valid√©s.

#### √âtat d'impl√©mentation pour le visa humain d'overview

‚úÖ Sch√©ma d'approbation cr√©√©: `shared/hermes2022-extraction-files/config/json-schemas/hermes2022-concepts-approval.json`
üöß Int√©gration dans le flux d'extraction/validation BDD √† compl√©ter
