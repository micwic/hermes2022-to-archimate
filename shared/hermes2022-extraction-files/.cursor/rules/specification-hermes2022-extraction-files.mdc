---
description: "Sp√©cification g√©n√©rale du module hermes2022-extraction-files"
alwaysApply: true
---

# specification-hermes2022-extraction-files.mdc: Sp√©cification g√©n√©rale du module hermes2022-extraction-files

Chemin : hermes2022-to-archimate/shared/hermes2022-extraction-files/.cursor/rules/

> Cr√©√© le : 2025-08-16  
> Derni√®re mise √† jour : 2025-08-18

## Description g√©n√©rale

- Le module hermes2022-extraction-files est un module partag√© qui centralise la gestion des fichiers interm√©diaires produits par l'extraction des concepts HERMES2022
- Il fournit la structure, les sch√©mas de validation et les donn√©es partag√©es entre les modules d'extraction, de chargement Archimate et de chargement Neo4j
- Il assure la coh√©rence et la validit√© des donn√©es √©chang√©es entre les diff√©rents modules du projet

## Contexte

- Sp√©cification amont @.cursor/rules/specification-hermes2022-to-archimate.mdc
- Module consomm√© par hermes2022-concepts-site-extraction, archimate-model-loader et hermes2022-ia-loader
- Interface de donn√©es standardis√©e pour l'ensemble du projet

## Objectifs

- Centraliser la d√©finition des structures de donn√©es interm√©diaires pour les concepts HERMES2022
- Assurer la validation et la coh√©rence des donn√©es √©chang√©es entre modules
- Fournir un r√©f√©rentiel unique et maintenable pour les sch√©mas de donn√©es
- Faciliter la tra√ßabilit√© et l'historisation des extractions

## Conception g√©n√©rale

- Architecture modulaire avec s√©paration claire des responsabilit√©s
- Interface standardis√©e bas√©e sur JSON Schema pour la validation
- Gestion d'archive pour conserver l'historique des extractions
- Structure extensible pour supporter l'√©volution des besoins

## Structure de r√©pertoire

| √âl√©ment | Type | Description |
|:--------|:-----|:------------|
| `/.cursor/rules/` | R√©pertoire | Sp√©cifications selon la gouvernance des r√®gles |
| `/config/json-schemas/` | R√©pertoire | Sch√©mas JSON Schema pour validation des fichiers interm√©diaires |
| `/data/` | R√©pertoire | Fichiers de donn√©es courantes et actives |
| `/data/archive/` | R√©pertoire | Historique des extractions pass√©es conserv√©es |

## D√©cisions architecturales et techniques

### Structure modulaire des fichiers interm√©diaires

#### Description d√©taill√©e pour la structure modulaire

- [2025-08-16] Les fichiers interm√©diaires sont organis√©s selon une structure modulaire respectant le principe de s√©gr√©gation des domaines
- [2025-08-16] __IMPL√âMENTATION ACTUELLE__ : Seules les phases HERMES2022 sont impl√©ment√©es, les autres concepts (sc√©narios, modules, t√¢ches, r√©sultats, r√¥les) seront ajout√©s progressivement
- [2025-08-16] La structure est con√ßue pour faciliter la maintenance et l'√©volution ind√©pendante de chaque concept
- [2025-08-16] __APPROCHE PAR LANGUE__ : Un fichier interm√©diaire par langue d'extraction pour √©viter les complexit√©s de gestion multilingue simultan√©e

#### Justification pour la structure modulaire

- __Maintenabilit√©__ : √âvolution ind√©pendante de chaque concept sans impact sur les autres
- __Lisibilit√©__ : Organisation claire facilitant la compr√©hension et la maintenance
- __Extensibilit√©__ : Ajout facile de nouveaux concepts sans modification de l'architecture existante
- __Coh√©rence__ : Respect du principe de s√©gr√©gation des domaines
- __Simplicit√© linguistique__ : √âvite les complexit√©s de gestion multilingue simultan√©e

#### Patterns valid√©s pour la structure modulaire

- __Un sch√©ma par concept__ : `/config/json-schemas/{concept}-schema.json` pour chaque concept HERMES2022
- __Sch√©ma principal__ : `hermes2022-concepts.json` qui r√©f√©rence tous les concepts impl√©ment√©s
- __Fichiers par langue__ : `hermes2022-concepts-{langue}.json` pour chaque langue d'extraction
- __Archive structur√©e__ : `/data/archive/{YYYY-MM-DD}/` pour l'historique

#### Anti-Patterns pour la structure modulaire √† √©viter

- __Sch√©ma monolithique__ : √âviter un seul fichier schema complexe ‚Üí __Solution__ : Modularit√© par concept ‚Üí __R√®gle √† adopter__ : Un sch√©ma par domaine pour faciliter la maintenance
- __M√©lange des responsabilit√©s__ : √âviter de m√©langer sp√©cifications, sch√©mas et donn√©es ‚Üí __Solution__ : S√©paration par r√©pertoires ‚Üí __R√®gle √† adopter__ : Structure modulaire avec responsabilit√©s distinctes
- __Gestion multilingue simultan√©e__ : √âviter les fichiers complexes avec plusieurs langues ‚Üí __Solution__ : Un fichier par langue ‚Üí __R√®gle √† adopter__ : S√©paration linguistique claire

#### √âtat d'impl√©mentation pour la structure modulaire

üöß [En cours de conception et r√©alisation]

- ‚úÖ __Phases HERMES2022__ : Sch√©ma complet impl√©ment√©
- ‚ùå __Autres concepts__ : √Ä impl√©menter progressivement selon les besoins

### Format et validation des fichiers interm√©diaires

#### Description d√©taill√©e pour le format et validation

- [2025-08-16] Les fichiers interm√©diaires utilisent le format JSON avec validation JSON Schema Draft 7
- [2025-08-16] __IMPL√âMENTATION ACTUELLE__ : Seul le sch√©ma des phases est compl√®tement d√©fini
- [2025-08-16] La validation est automatique et syst√©matique avant toute consommation par les modules avals
- [2025-08-16] __IDENTIFIANTS INTERNES__ : Cr√©ation d'identifiants al√©atoires uniques (format `ph_abc123`) pour √©viter la d√©pendance aux noms multilingues

#### Justification pour le format et validation

- __Format JSON__ : Lisibilit√© humaine et machine, interop√©rabilit√© universelle
- __JSON Schema__ : Validation structurelle automatis√©e, documentation int√©gr√©e
- __Validation syst√©matique__ : Garantie de la qualit√© et de la coh√©rence des donn√©es
- __Tra√ßabilit√©__ : Contr√¥le automatis√© des donn√©es √©chang√©es
- __Identifiants internes__ : Ind√©pendance linguistique et unicit√© garantie

#### Patterns valid√©s pour le format et validation

- __Validation automatique__ : Contr√¥les de coh√©rence avant consommation
- __Sch√©mas auto-document√©s__ : Documentation int√©gr√©e dans les sch√©mas
- __Gestion d'erreurs__ : Traitement syst√©matique des donn√©es invalides
- __Logs de validation__ : Tra√ßabilit√© des validations effectu√©es
- __Identifiants al√©atoires__ : Format `ph_abc123` pour l'unicit√© et l'ind√©pendance linguistique

#### Anti-Patterns pour le format et validation √† √©viter

- __Validation manuelle__ : √âviter les contr√¥les manuels ‚Üí __Solution__ : Validation automatique ‚Üí __R√®gle √† adopter__ : Contr√¥les syst√©matiques via JSON Schema
- __Sch√©mas rigides__ : √âviter les sch√©mas non √©volutifs ‚Üí __Solution__ : Sch√©mas extensibles ‚Üí __R√®gle √† adopter__ : Versioning et compatibilit√© ascendante
- __Identifiants s√©quentiels__ : √âviter les formats sugg√©rant un ordre ‚Üí __Solution__ : Identifiants al√©atoires ‚Üí __R√®gle √† adopter__ : Format `ph_abc123` sans s√©quence

#### √âtat d'impl√©mentation pour le format et validation

üöß [En cours de conception et r√©alisation]

- ‚úÖ __Sch√©ma des phases__ : Structure compl√®te avec identifiants al√©atoires
- ‚úÖ __Validation JSON Schema__ : Contraintes et patterns d√©finis
- ‚ùå __Autres concepts__ : Sch√©mas √† d√©finir progressivement

### Contraintes r√©f√©rentielles et hi√©rarchie des concepts

#### Description d√©taill√©e pour les contraintes r√©f√©rentielles

- [2025-08-16] __PHASES COMME CONCEPT DE R√âF√âRENCE__ : Les phases repr√©sentent le niveau le plus √©lev√© dans la hi√©rarchie HERMES2022
- [2025-08-16] __D√âPENDANCES__ : Les phases ne sont d√©pendantes que de la m√©thode et de la version HERMES2022, pas de contraintes externes
- [2025-08-16] __R√âF√âRENCEMENT FUTUR__ : Les phases seront r√©f√©renc√©es par les autres concepts au fur et √† mesure de l'avancement de la r√©alisation
- [2025-08-16] __VALIDATION D'EXISTENCE__ : Les r√©f√©rences vers les phases doivent pointer vers des phases valides selon le sch√©ma JSON

#### Justification pour les contraintes r√©f√©rentielles

- __Hi√©rarchie claire__ : Les phases sont le fondement de la m√©thodologie HERMES2022
- __Ind√©pendance__ : Pas de d√©pendances externes pour les phases
- __R√©utilisabilit√©__ : Les identifiants de phases seront r√©f√©renc√©s par d'autres concepts
- __Validation stricte__ : Assure la coh√©rence des r√©f√©rences entre concepts

#### Patterns valid√©s pour les contraintes r√©f√©rentielles

- __Phases comme r√©f√©rence__ : Concept de niveau sup√©rieur sans d√©pendances
- __Identifiants uniques__ : Format `ph_abc123` pour la tra√ßabilit√©
- __Validation d'existence__ : Contr√¥le que les r√©f√©rences pointent vers des phases valides
- __√âvolutivit√©__ : Structure pr√™te pour l'ajout de nouveaux concepts r√©f√©ren√ßant les phases

#### Anti-Patterns pour les contraintes r√©f√©rentielles √† √©viter

- __D√©pendances circulaires__ : √âviter que les phases d√©pendent d'autres concepts ‚Üí __Solution__ : Phases comme concept de r√©f√©rence ‚Üí __R√®gle √† adopter__ : Hi√©rarchie claire avec phases au niveau sup√©rieur
- __R√©f√©rences invalides__ : √âviter les r√©f√©rences vers des phases inexistantes ‚Üí __Solution__ : Validation d'existence ‚Üí __R√®gle √† adopter__ : Contr√¥le syst√©matique des r√©f√©rences

#### √âtat d'impl√©mentation pour les contraintes r√©f√©rentielles

üöß [En cours de conception et r√©alisation]

- ‚úÖ __Structure des phases__ : D√©finie et impl√©ment√©e
- ‚ùå __R√©f√©rences crois√©es__ : √Ä impl√©menter avec les autres concepts

### Hi√©rarchie sp√©cifique des phases HERMES2022 et propri√©t√© "order"

#### Description d√©taill√©e pour la hi√©rarchie des phases HERMES2022

- [2025-08-18] __HI√âRARCHIE OFFICIELLE HERMES2022__ : La m√©thodologie HERMES2022 d√©finit une structure hi√©rarchique sp√©cifique des phases avec la phase "Execution" qui regroupe plusieurs sous-phases
- [2025-08-18] __STRUCTURE √Ä DEUX NIVEAUX__ :
  - __Niveau 1__ : 1=Initiation, 2=Execution, 3=Closure  
  - __Niveau 2__ : Execution (2) = 2.1=Concept + 2.2=Implementation + 2.3=Deployment
- [2025-08-18] __PROPRI√âT√â "ORDER" COMPLEXE__ : La propri√©t√© "order" doit supporter cette hi√©rarchie √† deux niveaux avec un format "\\d+(\\.\\d+)*" pour permettre 1, 2, 2.1, 2.2, 2.3, 3
- [2025-08-18] __PAGES DE R√âF√âRENCE SP√âCIFIQUES__ :
  - Page g√©n√©rale : <https://www.hermes.admin.ch/en/project-management/phases.html>
  - Initiation : <https://www.hermes.admin.ch/en/project-management/phases/initiation.html>
  - Concept : <https://www.hermes.admin.ch/en/project-management/phases/concept.html>
  - Implementation : <https://www.hermes.admin.ch/en/project-management/phases/implementation.html>
  - Deployment : <https://www.hermes.admin.ch/en/project-management/phases/deployment.html>
  - Execution : <https://www.hermes.admin.ch/en/project-management/phases/execution.html>
  - Closure : <https://www.hermes.admin.ch/en/project-management/phases/closure.html>

#### Justification pour la hi√©rarchie des phases HERMES2022

- __Conformit√© m√©thodologique__ : Respect exact de la structure officielle HERMES2022
- __Phase composite "Execution"__ : Regroupement logique Concept+Implementation+Deployment selon la m√©thodologie
- __Propri√©t√© "order" hi√©rarchique__ : N√©cessaire pour repr√©senter correctement la structure √† deux niveaux
- __URLs de r√©f√©rence sp√©cifiques__ : Sources officielles pour l'extraction du contexte et de l'articulation

#### Patterns valid√©s pour la hi√©rarchie des phases HERMES2022

- __Order hi√©rarchique__ : Format "1", "2", "2.1", "2.2", "2.3", "3" selon pattern "\\d+(\\.\\d+)*"
- __Phase composite__ : Type "composite" pour Execution, type "simple" pour les autres
- __Extraction par URL__ : Une URL sp√©cifique par phase pour extraction du contexte
- __Contexte g√©n√©ral__ : Page g√©n√©rale phases.html pour articulation d'ensemble

#### Anti-Patterns pour la hi√©rarchie des phases HERMES2022 √† √©viter

- __Order s√©quentiel simple__ : √âviter 1,2,3,4,5,6 qui ne respecte pas la hi√©rarchie ‚Üí __Solution__ : Hi√©rarchie √† deux niveaux ‚Üí __R√®gle √† adopter__ : Format "\\d+(\\.\\d+)*"
- __URLs g√©n√©riques__ : √âviter l'extraction depuis la page g√©n√©rale uniquement ‚Üí __Solution__ : URLs sp√©cifiques par phase ‚Üí __R√®gle √† adopter__ : Une URL par phase pour le contexte d√©taill√©
- __Description litt√©rale fixe__ : √âviter description pr√©d√©finie dans le sch√©ma ‚Üí __Solution__ : Structure pour contenu extractible ‚Üí __R√®gle √† adopter__ : Description comme string avec contraintes de validation

#### √âtat d'impl√©mentation pour la hi√©rarchie des phases HERMES2022

üöß [En cours de sp√©cification et r√©alisation]

### Structure du sch√©ma JSON pour extraction optimis√©e

#### Description d√©taill√©e pour la structure du sch√©ma JSON

- [2025-08-18] __STRUCTURE DESCRIPTION__ : La propri√©t√© "description" est d√©finie comme structure pour contenu extractible (string, pattern, required)
- [2025-08-18] __EXTRACTION CONTEXTE__ : La description contient le contexte et l'articulation extraits des pages sp√©cifiques HERMES2022
- [2025-08-18] __CONTRAINTES DE VALIDATION__ : Longueur minimale/maximale, patterns de validation pour assurer la qualit√© du contenu extrait
- [2025-08-18] __INTEROP√âRABILIT√â__ : Structure compatible avec les modules de chargement Archimate et Neo4j

#### Description g√©n√©rale du concept de phases (phases-concept)

- [2025-08-18] __PROPRI√âT√â DE NIVEAU SUP√âRIEUR__ : Ajout de `phases-concept` au sch√©ma `hermes2022-phases.json` pour porter la description g√©n√©rale des phases HERMES2022.
- __But__ : Capturer un r√©sum√© conceptuel (cycle de vie, approches traditionnelle/agile, uniformit√© des interfaces, jalons/quality gates, hi√©rarchie 1/2/2.x/3, r√¥le d'Initiation/Closure) provenant de la page officielle des phases.
- __Champs__ :
  - `overview` (string, minLength 50, maxLength 5000) : texte synth√©tique structur√©.
  - `sourceUrl` (string, uri, enum = `<https://www.hermes.admin.ch/en/project-management/phases.html>`) : r√©f√©rence officielle.
  - `lastChecked` (string, date) : date de derni√®re v√©rification.
- __Obligation__ : `phases-concept` est requis au m√™me titre que `metadata` et `phases`.
- __Compl√©mentarit√©__ : `phases-concept` pr√©c√®de et contextualise la liste `phases` sans la remplacer.

#### Justification pour la structure du sch√©ma JSON

- __Extraction IA optimis√©e__ : Permet l'extraction effective du contenu depuis les pages HERMES2022
- __Contexte riche__ : Capture l'articulation g√©n√©rale et le contexte sp√©cifique de chaque phase
- __Validation qualit√©__ : Contraintes pour assurer la pertinence du contenu extrait
- __Interop√©rabilit√©__ : Structure compatible avec les modules de chargement Archimate et Neo4j

#### Patterns valid√©s pour la structure du sch√©ma JSON

- __Description extractible__ : Type string avec contraintes minLength/maxLength appropri√©es
- __Validation pattern__ : Contraintes sur le format et la qualit√© du contenu
- __Champs required__ : Description obligatoire pour chaque phase extraite
- __M√©tadonn√©es extraction__ : Source, date, version pour tra√ßabilit√©

#### Anti-Patterns pour la structure du sch√©ma JSON √† √©viter

- __Description pr√©d√©finie__ : √âviter les litt√©raux fixes dans le sch√©ma ‚Üí __Solution__ : Structure extractible ‚Üí __R√®gle √† adopter__ : Description comme contenu variable valid√©
- __Contraintes trop strictes__ : √âviter des patterns trop rigides ‚Üí __Solution__ : Contraintes adapt√©es au contenu HERMES2022 ‚Üí __R√®gle √† adopter__ : Validation √©quilibr√©e qualit√©/flexibilit√©

#### √âtat d'impl√©mentation pour la structure du sch√©ma JSON

üöß [En cours de sp√©cification et r√©alisation]

### Gestion d'archive et tra√ßabilit√©

#### Description d√©taill√©e pour la gestion d'archive

- [2025-08-16] Un syst√®me d'archive est mis en place pour conserver l'historique des extractions
- [2025-08-16] Chaque extraction est dat√©e et versionn√©e pour assurer la tra√ßabilit√©
- [2025-08-16] L'archive permet la comparaison et l'analyse des √©volutions des concepts HERMES2022

#### Justification pour la gestion d'archive

- __Tra√ßabilit√©__ : Suivi des √©volutions des concepts HERMES2022
- __Audit__ : Possibilit√© de revenir sur des versions ant√©rieures
- __Analyse__ : Comparaison des extractions pour identifier les changements
- __Conformit√©__ : Respect des exigences de tra√ßabilit√© du projet

#### Patterns valid√©s pour la gestion d'archive

- __Versioning automatique__ : Num√©rotation automatique des versions
- __M√©tadonn√©es__ : Informations de contexte pour chaque extraction
- __Compression__ : Optimisation de l'espace de stockage
- __Indexation__ : Recherche et acc√®s facilit√©s aux archives

#### Anti-Patterns pour la gestion d'archive √† √©viter

- __Perte d'historique__ : √âviter de perdre les extractions pass√©es ‚Üí __Solution__ : Syst√®me d'archive ‚Üí __R√®gle √† adopter__ : Conservation syst√©matique des versions
- __Archive non structur√©e__ : √âviter le stockage non organis√© ‚Üí __Solution__ : Structure hi√©rarchique ‚Üí __R√®gle √† adopter__ : Organisation par date et concept

#### √âtat d'impl√©mentation pour la gestion d'archive

üöß [En cours de conception et r√©alisation]
