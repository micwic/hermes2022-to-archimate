{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "HERMES2022 Phases Schema",
  "description": "Schéma pour la validation des phases HERMES2022 extraites",
  "type": "object",
  "properties": {
    "extractionModel": {
      "type": "string",
      "enum": ["claude", "nuextract"],
      "default": "claude",
      "description": "Modèle LLM à utiliser pour l'extraction de ce bloc"
    },
    "overview": {
      "type": "string",
      "minLength": 50,
      "maxLength": 5000,
      "description": "Résumé conceptuel (cycle de vie, interfaces uniformes, jalons/quality gates, hiérarchie 1/2/2.x/3, rôle des phases communes)."
    },
    "sourceUrl": {
      "type": "array",
      "items": {
        "type": "string",
        "enum": [
          "/project-management/phases.html"
        ]
      },
      "description": "Chemin relatif de la page de référence utilisée pour cette description (combiné avec baseUrl lors de l'extraction)."
    },
    "extractionInstructions": {
      "type": "array",
      "items": {
        "type": "string",
        "enum": [
          "Produce a synthetic text (overview) covering:",
          "Lifecycle (project start, solution development, project end)",
          "Traditional vs agile approaches (Execution not subdivided in agile)",
          "Uniformity of interfaces, milestones/quality gates, releases",
          "Hierarchy and order (1, 2, 2.1, 2.2, 2.3, 3), role Initiation/Closure",
          "Target length: 600-1500 words, factual style and faithful to source",
          "Integrate salient points useful for AI for context and articulation"
        ]
      },
      "description": "Instructions for extracting the phases overview from the phases page"
    },
    "phases": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "pattern": "^ph_[a-z0-9]{6}$",
            "description": "Identifiant unique de la phase (format: ph_abc123)"
          },
          "extractionModel": {
            "type": "string",
            "enum": ["claude", "nuextract"],
            "default": "claude",
            "description": "Modèle LLM à utiliser pour l'extraction de ce bloc"
          },
          "sourceUrl": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "/project-management/phases/initiation.html",
                "/project-management/phases/concept.html",
                "/project-management/phases/deployment.html",
                "/project-management/phases/implementation.html",
                "/project-management/phases/execution.html",
                "/project-management/phases/closure.html"
              ]
            },
            "description": "Chemins relatifs des pages spécifiques de la phase (combinés avec baseUrl lors de l'extraction)"
          },
          "extractionInstructions": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "Extract phase information from the specific phase page",
                "Extract base information: name, hierarchical order, type",
                "Extract main description explaining main objective, role in project lifecycle, and foundations created",
                "Extract context explaining how phase integrates in lifecycle, relationship with other phases, importance in HERMES2022 methodology",
                "Identify and list main outcomes (results): documents produced, decisions taken, foundations established",
                "Identify control points and milestones: phase release decisions, required validations, success criteria",
                "Determine supported approaches as array: [\"traditional\"], [\"agile\"], or [\"traditional\", \"agile\"] if both are supported.",
                "Output: plain text (no rich Markdown). Site language. Factual, neutral style, without extrapolation",
                "Extract only information present on the page",
                "Respect JSON structure defined in schema",
                "Maintain coherence with validation schema",
                "Prioritize precision over quantity of information"
              ]
            },
            "description": "Instructions for extracting phase information from the phase-specific page"
          },
          "name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "description": "Nom de la phase en anglais"
          },
          "order": {
            "type": "string",
            "pattern": "^\\d+(\\.\\d+)*$",
            "description": "Ordre hiérarchique de la phase (ex: 1, 2, 2.1, 2.2, 2.3, 3)"
          },
          "type": {
            "type": "string",
            "enum": ["simple", "composite"],
            "description": "Type de phase : simple ou composite (regroupant plusieurs sous-phases)"
          },
          "description": {
            "type": "string",
            "minLength": 10,
            "maxLength": 2000,
            "description": "Description détaillée de la phase et de ses objectifs"
          },
          "context": {
            "type": ["string", "null"],
            "minLength": 10,
            "maxLength": 1000,
            "description": "Contexte et articulation de la phase dans le cycle de vie du projet"
          },
          "outcomes": {
            "type": "array",
            "items": {
              "type": "string",
              "minLength": 5,
              "maxLength": 300
            },
            "description": "Liste des résultats attendus de la phase"
          },
          "milestones": {
            "type": "array",
            "items": {
              "type": "string",
              "minLength": 5,
              "maxLength": 300
            },
            "description": "Points de contrôle et jalons de la phase"
          },
          "approach": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": ["traditional", "agile", "both"]
            },
            "description": "Approches supportées par la phase (traditionnelle, agile, ou les deux)"
          }
        },
        "required": ["id", "name", "order", "type", "extractionModel", "sourceUrl", "extractionInstructions", "description", "context", "approach"]
      },
      "minItems": 1,
      "description": "Liste des phases HERMES2022"
    }
  },
      "required": ["overview", "extractionModel", "sourceUrl", "extractionInstructions", "phases"]
}
